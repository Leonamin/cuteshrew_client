# 네비게이션 리팩토링 회고
## 1. 네비게이션 개선 방안
URL을 통해 인자를 받고 화면과 URL을 동기화 시키는 방법을 몇가지 찾았는데 다음과 같았다.  

### Dane Mackier의 라우팅 방법  
get_it 라이브러리로 어디에서나 네비게이션 기능을 이용할 수 있게 의존성 주입을 한다.  
그리고 일반 settings.name으로 온 경로를 간편하게 url처럼 사용할 수 있게 String에 route와 query를 분리하고 임의로 만든 사용자 데이터인 RoutingData로 받아오는 extention을 추가한다.  
그리고 query는 따로 파라미터를 뽑아내는 용도로 사용하고 route는 기존에 URI 세그먼트를 분리하기위해 settings.name을 그대로 넣던 부분을 대신해서 route를 넣었다.  
그리고 NavigationService는 PushNamed()를 할 때 경로를 기존에 더해서 queryParameter를 추가한다.
그런데 PostingEditorPage와 같이 게시글의 내용 처럼 대용량 데이터를 받는 부분을 queryParameter화 시키기에는 맞지 않는 것 같아서 기존에 사용하는 arguments는 그대로 두었다.  

이 부분은 PostingPage 수정 -> PostingEditorPage 이렇게 넘어갈 때 데이터도 함께 주는게 아니라 게시글 번호만 넘겨주고 게시글 번호를 받으면 수정 모드로 만들고 다시 게시글을 서버에서 내려 받는 식으로 하면 어찌어찌 구현은 될거 같지만 구색을 맞추겠다고 같은 데이터를 2번 다운로드 하는 점은 맞지 않는 것 같아서 놔두는게 좋을 것 같다. 아니면 postId를 주고 만약 arguments를 통해 기존 게시글 데이터를 받으면 다운로드 하지 않고 URL 경로를 직접타이핑해서 들어온 경우 다운로드 할 수 있게하는 것도 좋겠지만 일반적인 상황이 아니므로 오히려 해당 선택지를 막아야 할 수도 있다.

정리하자면 Navigation 1.0을 기반으로 Navigation관련 라이브러리없이 꽤 괜찮게 Route와 Query를 분리할 수 있는 방법이라고 생각한다.  
아직까지는 큰 불편함을 느끼지는 않았기 때문에 Navigation 2.0을 적용하지는 않을 것이다. Navigation 2.0은 다른 앱 개발 시 적용해보고 괜찮고 이유가 있으면 넘어가겠지만

### Navigation 2.0
flutter_study에도 올렸던 내용이지만 Navigation 2.0은 1.0과 다르게 Navigation.push, pop 하는 형식이 아닌 데이터 변경시 상태 변화로 라우팅 하는 것이기 때문에 지금처럼 각 스크린마다 필요한 데이터를 따로 가지고 있는 상황에서는 리팩토링 하다가는 1주일이 걸릴 것으로 보이고 1주일이 걸린 것과 대조해서 얻을 이득은 없어보인다.

### Fluro 라이브러리
사용하면 편하겠지만 굳이 또 라이브러리 의존성을 만들고 싶지 않아서 보류한다.